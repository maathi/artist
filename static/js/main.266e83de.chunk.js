(this.webpackJsonpartist=this.webpackJsonpartist||[]).push([[0],{148:function(e,t,n){},238:function(e,t,n){},258:function(e,t,n){},259:function(e,t){},260:function(e,t,n){},368:function(e,t,n){},380:function(e,t){},382:function(e,t){},396:function(e,t){},398:function(e,t){},426:function(e,t){},428:function(e,t){},429:function(e,t){},434:function(e,t){},436:function(e,t){},455:function(e,t){},467:function(e,t){},470:function(e,t){},487:function(e,t,n){},488:function(e,t,n){},494:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(1),i=n.n(a),c=n(242),o=n.n(c),s=n(10),l=n(26),u=n.n(l),d=n(45),j=n(8),b=(n(258),n(14)),p=n(15),h=n(21),O=(n(259),n(148),n(260),n(55));var m=function(e){var t=e.j;return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("span",{id:"name",children:t.name}),Object(r.jsx)("div",{className:"wrapper",children:Object(r.jsx)(b.b,{to:"/".concat(t.id),children:Object(r.jsx)("img",{src:"".concat("https://firebasestorage.googleapis.com/v0/b/artist-4bd1b.appspot.com/o","/paintings%2F").concat(t.pic,".png?alt=media"),alt:""})})}),Object(r.jsxs)("div",{id:"bottom",children:[Object(r.jsx)(O.b,{id:"heart"}),Object(r.jsxs)("div",{id:"user-info",children:[Object(r.jsx)(b.b,{to:"/@".concat(t.owner.name),style:{color:"white"},children:t.owner.name}),Object(r.jsx)(b.b,{to:"/@".concat(t.owner.name),children:Object(r.jsx)("img",{src:"".concat("https://firebasestorage.googleapis.com/v0/b/artist-4bd1b.appspot.com/o","/avatars%2F").concat(t.owner.photo,"?alt=media"),alt:"",style:{height:"1.4rem"}})})]})]})]})};function f(){var e=Object(h.a)(["\n  query {\n    arts {\n      id\n      rid\n      name\n      pic\n      owner {\n        id\n        name\n        photo\n      }\n    }\n  }\n"]);return f=function(){return e},e}var x=Object(s.gql)(f());var g=function(){var e=Object(a.useState)(),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(s.useQuery)(x),o=c.loading,l=c.error,u=c.data;return Object(a.useEffect)((function(){(null===u||void 0===u?void 0:u.arts)&&i(u.arts)}),[u]),o?Object(r.jsx)("p",{children:"Loading..."}):l?Object(r.jsx)("p",{children:"Error :("}):Object(r.jsx)("div",{className:"arts",children:null===n||void 0===n?void 0:n.map((function(e){return Object(r.jsx)(m,{j:e},e.id)}))})};function v(){var e=Object(h.a)(["\n  query Art($id: Int) {\n    art(id: $id) {\n      id\n      name\n      pic\n      description\n      owner {\n        id\n        name\n      }\n    }\n  }\n"]);return v=function(){return e},e}var w=Object(s.gql)(v());var A=function(){var e=Object(a.useState)(),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(p.g)().id,o=Object(s.useQuery)(w,{variables:{id:Number(c)}}),l=o.loading,u=o.error,d=o.data;return Object(a.useEffect)((function(){(null===d||void 0===d?void 0:d.art)&&i(d.art)}),[d]),l?Object(r.jsx)("p",{children:"Loading..."}):u?Object(r.jsx)("p",{children:"Error :("}):Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:null===n||void 0===n?void 0:n.name}),Object(r.jsx)("img",{src:"".concat("https://firebasestorage.googleapis.com/v0/b/artist-4bd1b.appspot.com/o","/paintings%2F").concat(null===n||void 0===n?void 0:n.pic,".png?alt=media"),style:{backgroundColor:"rgb(209, 209, 209)",border:"3px solid black"},alt:""}),Object(r.jsxs)("p",{style:{fontSize:"18px"},children:[Object(r.jsx)("span",{children:"Created by : "}),Object(r.jsx)(b.b,{to:"/@".concat(null===n||void 0===n?void 0:n.owner.name),style:{color:"white"},children:null===n||void 0===n?void 0:n.owner.name})]}),Object(r.jsxs)("p",{style:{fontSize:"18px"},children:[Object(r.jsx)("span",{children:"Description :"}),Object(r.jsxs)("span",{style:{color:"white"},children:[" ",null===n||void 0===n?void 0:n.description]})]})]})},y=n(250),C=(n(269),n(65)),B=n(47);function q(e){var t=Object(a.useState)(),n=Object(j.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(),s=Object(j.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)(),b=Object(j.a)(d,2),p=b[0],h=b[1],O=Object(a.useState)("up"),m=Object(j.a)(O,2),f=m[0],x=m[1];function g(){x("up");var t=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),a=new Uint8Array(r),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([r],{type:n})}(p.toDataURL());e.setFile(t)}return Object(a.useEffect)((function(){var e=document.getElementById("canvas");h(e);var t=e.getContext("2d");u(t)}),[]),Object(a.useEffect)((function(){l&&("up"!=f?(l.lineWidth=e.lineWidth,l.lineCap="round",l.lineTo(null===i||void 0===i?void 0:i.x,null===i||void 0===i?void 0:i.y),l.strokeStyle=e.color,l.stroke()):l.beginPath())}),[i]),Object(r.jsx)("div",{children:Object(r.jsx)("canvas",{onMouseMove:function(e){return function(e){var t=p.getBoundingClientRect();c({x:(e.clientX-t.left)/(t.right-t.left)*p.width,y:(e.clientY-t.top)/(t.bottom-t.top)*p.height})}(e)},onMouseDown:function(){return x("down")},onMouseUp:function(){return g()},onMouseLeave:function(){return x("up")},id:"canvas",width:"600px",height:"400px",style:{border:"1px solid black",display:"block",margin:"auto",backgroundColor:"#eee",cursor:"cell"}})})}n(368);var S=n(147);n(496);S.a.initializeApp({storageBucket:"artist-4bd1b.appspot.com"});var L=S.a.storage(),F=n(110),N=n.n(F);function k(){var e=Object(h.a)(["\n  mutation AddArt($name: String, $pic: String, $description: String) {\n    addArt(name: $name, pic: $pic, description: $description) {\n      id\n      name\n    }\n  }\n"]);return k=function(){return e},e}var K=Object(s.gql)(k());var I=function(){var e=Object(a.useState)("#000"),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(3),o=Object(j.a)(c,2),l=o[0],b=o[1],p=Object(s.useMutation)(K),h=Object(j.a)(p,2),O=h[0],m=h[1].data,f=Object(C.a)({initialValues:{name:"",file:null,description:""},validationSchema:B.b({name:B.c().max(20,"Title must be 20 characters or less").min(4,"Title must be at least 4 characters long").required("A title is required"),file:B.a().test("required","you have to draw something",(function(e){return e})),description:B.c().max(244,"Must be 244 characters or less")}),onSubmit:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.ref(),r=N.a.generate(),a=n.child("paintings/".concat(r,".png")),e.next=5,a.put(t.file);case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:O({variables:{name:t.name,pic:r,description:t.description}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(a.useEffect)((function(){m&&m.addArt&&(window.location.href="/artist")}),[m]),Object(r.jsxs)("section",{id:"new",children:[Object(r.jsx)("h2",{children:"add a new painting!"}),Object(r.jsxs)("form",{onSubmit:f.handleSubmit,autoComplete:"off",children:[Object(r.jsx)("input",{name:"name",placeholder:"title",value:f.values.name,onChange:f.handleChange,onBlur:f.handleBlur}),Object(r.jsx)("div",{className:"error",children:f.touched.name&&f.errors.name?f.errors.name:null}),Object(r.jsx)("textarea",{name:"description",placeholder:"description",value:f.values.description,onChange:f.handleChange,onBlur:f.handleBlur}),Object(r.jsx)("div",{className:"error",children:f.touched.description&&f.errors.description?f.errors.description:null}),Object(r.jsx)(q,{color:n,lineWidth:l,setFile:function(e){return f.setFieldValue("file",e)}}),Object(r.jsx)("div",{className:"error",children:f.errors.file?f.errors.file:null}),"line width : ",l,Object(r.jsx)("input",{type:"range",min:"1",max:"60",value:l,onChange:function(e){return b(e.target.value)}}),Object(r.jsx)("div",{id:"color-picker",children:Object(r.jsx)(y.a,{onChange:i})}),Object(r.jsx)("button",{type:"submit",children:"create"})]})]})},E=i.a.createContext({}),M=n(80),W=n.n(M);n(487);function V(){var e=Object(h.a)(["\n  mutation UpdateIntro($intro: String) {\n    updateIntro(intro: $intro) {\n      intro\n    }\n  }\n"]);return V=function(){return e},e}function P(){var e=Object(h.a)(["\n  mutation UpdatePhoto($photo: String) {\n    updatePhoto(photo: $photo)\n  }\n"]);return P=function(){return e},e}function Y(){var e=Object(h.a)(["\n  mutation DeleteArt($id: Int) {\n    deleteArt(id: $id) {\n      id\n      name\n    }\n  }\n"]);return Y=function(){return e},e}function J(){var e=Object(h.a)(["\n  query UserByName($name: String) {\n    userByName(name: $name) {\n      id\n      name\n      password\n      photo\n      intro\n      arts {\n        id\n        name\n        pic\n        owner {\n          name\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var D=Object(s.gql)(J()),Z=Object(s.gql)(Y()),X=Object(s.gql)(P()),z=Object(s.gql)(V());var G=function(){var e=Object(a.useState)(),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(""),o=Object(j.a)(c,2),l=o[0],h=o[1],m=Object(a.useState)(!1),f=Object(j.a)(m,2),x=f[0],g=f[1],v=Object(p.g)().name,w=Object(a.useContext)(E),A=Object(s.useQuery)(D,{variables:{name:v}}),y=A.loading,C=A.error,B=A.data,q=Object(s.useMutation)(X),S=Object(j.a)(q,2),F=S[0],k=S[1].data,K=Object(s.useMutation)(z),I=Object(j.a)(K,2),M=I[0],V=(I[1].data,Object(s.useMutation)(Z)),P=Object(j.a)(V,2),Y=P[0],J=P[1].data;function G(e){return R.apply(this,arguments)}function R(){return(R=Object(d.a)(u.a.mark((function e(t){var n,r,a,i,c,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,r=n.validity,a=Object(j.a)(n.files,1),i=a[0],r.valid){e.next=3;break}return e.abrupt("return");case 3:return c=L.ref(),o=N.a.generate(),s=c.child("avatars/".concat(o)),e.next=8,s.put(i);case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:F({variables:{photo:o}});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){document.getElementById("upload").click()}function T(e){return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("span",{id:"name",children:e.name}),Object(r.jsx)("div",{className:"wrapper",children:Object(r.jsx)(b.b,{to:"/".concat(e.id),children:Object(r.jsx)("img",{src:"".concat("https://firebasestorage.googleapis.com/v0/b/artist-4bd1b.appspot.com/o","/paintings%2F").concat(e.pic,".png?alt=media"),alt:""})})}),x?Object(r.jsx)("div",{id:"bottom",children:Object(r.jsx)(O.d,{id:"delete",onClick:function(){var t;t=e.id,Y({variables:{id:Number(t)}})}})}):""]},e.id)}return Object(a.useEffect)((function(){B&&B.userByName&&(i(B.userByName),h(B.userByName.intro||""),B.userByName.id==w.id&&g(!0))}),[B]),Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.decode(k.updatePhoto);case 2:t=e.sent,w.setPhoto(t.photo);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k&&k.updatePhoto&&(!function(){e.apply(this,arguments)}(),localStorage.setItem("token",k.updatePhoto))}),[k]),Object(a.useEffect)((function(){if(J&&J.deleteArt){var e=n.arts.filter((function(e){return e.id!=J.deleteArt.id})),t=JSON.parse(JSON.stringify(n));t.arts=e,i(t)}}),[J]),y?Object(r.jsx)("h1",{children:"loading..."}):C?Object(r.jsx)("h1",{children:"error!"}):Object(r.jsxs)("div",{id:"user",children:[x?Object(r.jsxs)("div",{id:"infos",children:[Object(r.jsx)("div",{className:"photo-wrapper",children:Object(r.jsx)("img",{src:"".concat("https://firebasestorage.googleapis.com/v0/b/artist-4bd1b.appspot.com/o","/avatars%2F").concat(w.photo,"?alt=media"),alt:"",onClick:U})}),Object(r.jsx)("input",{style:{display:"none"},id:"upload",type:"file",onChange:G}),Object(r.jsx)("textarea",{value:l,onChange:function(e){return h(e.target.value)},name:"",id:"",placeholder:"what's up?"}),l?Object(r.jsx)("div",{children:Object(r.jsxs)("button",{onClick:function(){return M({variables:{intro:l}})},children:[Object(r.jsx)(O.c,{id:"save"}),"save"]})}):""]}):Object(r.jsxs)("div",{id:"infos",children:[Object(r.jsx)("div",{className:"photo-wrapper",children:Object(r.jsx)("img",{src:"".concat("https://firebasestorage.googleapis.com/v0/b/artist-4bd1b.appspot.com/o","/avatars%2F").concat(null===n||void 0===n?void 0:n.photo,"?alt=media"),alt:""})}),Object(r.jsx)("p",{children:l})]}),Object(r.jsx)("div",{children:(null===n||void 0===n?void 0:n.arts[0])?Object(r.jsxs)("div",{children:[Object(r.jsxs)("h4",{children:[Object(r.jsx)("span",{children:null===n||void 0===n?void 0:n.name}),"'s paintings :"]}),Object(r.jsx)("div",{className:"arts",children:null===n||void 0===n?void 0:n.arts.map((function(e){return T(e)}))})]}):Object(r.jsxs)("h4",{children:[Object(r.jsx)("span",{children:null===n||void 0===n?void 0:n.name})," has no paintings yet :/"]})})]})},R="data:image/png;base64,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";n(238);function U(){var e=Object(h.a)(["\n  query CheckName($name: String) {\n    checkName(name: $name) {\n      name\n    }\n  }\n"]);return U=function(){return e},e}function T(){var e=Object(h.a)(["\n  mutation AddUser($name: String, $password: String) {\n    addUser(name: $name, password: $password)\n  }\n"]);return T=function(){return e},e}var H=Object(s.gql)(T()),Q=Object(s.gql)(U());var $=function(){var e=Object(s.useMutation)(H),t=Object(j.a)(e,2),n=t[0],i=t[1].data,c=Object(s.useLazyQuery)(Q),o=Object(j.a)(c,2),l=o[0],p=o[1],h=(p.loading,p.data),O=(p.error,Object(C.a)({initialValues:{name:"",password:""},validationSchema:B.b({name:B.c().max(15,"username must be 15 characters or less").min(3,"username must be at least 3 characters long").matches(/^[a-z0-9_]+$/i,"Username can only contain alphanumeric characters and underscores").matches(/^[a-z].*/,"Username has to start with an alphabetic character").required("A username is required").test("check username","username already exists!",function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:{name:t}});case 2:return e.sent,e.abrupt("return",!(null===h||void 0===h?void 0:h.checkName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),password:B.c().max(30,"Password must be 30 characters or less").min(4,"Password must be at least 4 characters long").required("A password is Required")}),onSubmit:function(e){n({variables:{name:e.name,password:e.password}})}}));return Object(a.useEffect)((function(){i&&i.addUser&&(localStorage.setItem("token",i.addUser),window.location.href="/artist")}),[i]),Object(r.jsxs)("section",{id:"register",children:[Object(r.jsx)("h1",{children:"Register"}),Object(r.jsxs)("form",{onSubmit:O.handleSubmit,autoComplete:"off",children:[Object(r.jsx)("input",{type:"text",name:"name",placeholder:"pick a username",value:O.values.name,onChange:O.handleChange,onBlur:O.handleBlur}),Object(r.jsx)("div",{className:"error",children:O.errors.name?O.errors.name:null}),Object(r.jsx)("input",{id:"password",name:"password",placeholder:"password",type:"text",value:O.values.password,onChange:O.handleChange,onBlur:O.handleBlur}),Object(r.jsx)("div",{className:"error",children:O.touched.password&&O.errors.password?O.errors.password:null}),Object(r.jsx)("button",{type:"submit",children:"Register"}),Object(r.jsx)("div",{className:"error"})]}),Object(r.jsxs)("span",{children:["already have an account? ",Object(r.jsx)(b.b,{to:"/login",children:"login"})]})]})},_=n(84);n.p;function ee(){var e=Object(h.a)(["\n  query Login($name: String, $password: String) {\n    login(name: $name, password: $password)\n  }\n"]);return ee=function(){return e},e}var te=Object(s.gql)(ee());var ne=function(){var e,t=Object(a.useState)(""),n=Object(j.a)(t,2),i=n[0],c=n[1],o=Object(s.useLazyQuery)(te),l=Object(j.a)(o,2),u=l[0],d=l[1],p=d.loading,h=d.data,O=d.error,m=Object(C.a)({initialValues:{name:"",password:""},onSubmit:function(e){u({variables:{name:e.name,password:e.password}})}});return Object(a.useEffect)((function(){h&&(h.login?(localStorage.setItem("token",h.login),window.location.href="/artist"):c("your username and password don't match"))}),[h]),p?Object(r.jsx)("p",{children:"loading..."}):O?Object(r.jsxs)("p",{children:["`Error! $",O,"`"]}):Object(r.jsxs)("section",{id:"login",children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsxs)("form",{onSubmit:m.handleSubmit,autoComplete:"off",children:[Object(r.jsx)("input",{type:"text",name:"name",placeholder:"username",onChange:m.handleChange,onBlur:m.handleBlur,value:m.values.name}),Object(r.jsx)("div",{className:"error",children:m.touched.name&&m.errors.name?m.errors.name:null}),Object(r.jsx)("input",(e={id:"password",name:"password",type:"password",placeholder:"password"},Object(_.a)(e,"type","text"),Object(_.a)(e,"onChange",m.handleChange),Object(_.a)(e,"onBlur",m.handleBlur),Object(_.a)(e,"value",m.values.password),e)),Object(r.jsx)("div",{className:"error",children:m.touched.password&&m.errors.password?m.errors.password:null}),Object(r.jsx)("button",{type:"submit",children:"Login"}),Object(r.jsx)("div",{className:"error",children:i||null})]}),Object(r.jsxs)("span",{id:"not-a-user",children:["not a user? ",Object(r.jsx)(b.b,{to:"/register",children:"register"})]})]})},re=(n(488),n(251));var ae=function(e){var t=Object(a.useContext)(E),n=Object(a.useState)("nav"),c=Object(j.a)(n,2),o=c[0],s=(c[1],Object(a.useState)({justifyContent:"flex-end",columnGap:"3rem",height:"2.6rem"})),l=Object(j.a)(s,2),u=l[0],d=l[1];function p(){localStorage.clear(),window.location.href="/login"}return Object(r.jsxs)("ul",{className:o,style:u,children:[Object(r.jsx)("li",{children:Object(r.jsx)(b.b,{to:"/artist",children:Object(r.jsx)("img",{id:"logo",src:R,alt:""})})}),t.token?Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(b.b,{to:"/new",children:Object(r.jsx)(O.a,{id:"brush"})})}),Object(r.jsxs)("li",{children:[Object(r.jsx)("img",{id:"nav-pic",src:"".concat("https://firebasestorage.googleapis.com/v0/b/artist-4bd1b.appspot.com/o","/avatars%2F").concat(t.photo,"?alt=media"),alt:""}),Object(r.jsx)(b.b,{to:"/@"+t.name,children:t.name})]}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{onClick:p,children:"logout"})})]}):Object(r.jsx)("li",{children:Object(r.jsx)(b.b,{to:"/login",children:"login"})}),Object(r.jsx)("li",{id:"menu",onClick:function(){d({rowGap:"1rem",flexDirection:"column"})},children:Object(r.jsx)("a",{children:Object(r.jsx)(re.a,{})})})]})};var ie=function(e){var t=e.path,n=e.component;return Object(a.useContext)(E).token?Object(r.jsx)(p.b,{path:t,component:n}):Object(r.jsx)(p.a,{to:"/login"})};var ce=function(e){var t=e.path,n=e.component;return Object(a.useContext)(E).token?Object(r.jsx)(p.a,{to:"/artist"}):Object(r.jsx)(p.b,{path:t,component:n})};var oe=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(""),o=Object(j.a)(c,2),s=o[0],l=o[1],h=Object(a.useState)(""),O=Object(j.a)(h,2),m=O[0],f=O[1],x=localStorage.getItem("token");return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.decode(x);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:i(t.id),l(t.name),f(t.photo);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.jsx)(b.a,{children:Object(r.jsx)(E.Provider,{value:{id:n,setId:i,name:s,setName:l,photo:m,setPhoto:f,token:x},children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(ae,{}),Object(r.jsxs)(p.d,{children:[Object(r.jsx)(p.b,{path:"/@:name",component:G}),Object(r.jsx)(ie,{path:"/new",component:I}),Object(r.jsx)(p.b,{path:"/artist",children:Object(r.jsx)(g,{})}),Object(r.jsx)(ce,{path:"/login",component:ne}),Object(r.jsx)(ce,{path:"/register",component:$}),Object(r.jsx)(p.b,{path:"/:id",children:Object(r.jsx)(A,{})})]})]})})})},se=n(498),le=n.n(se),ue=new s.ApolloLink((function(e,t){return e.setContext({headers:{authorization:localStorage.getItem("token")||null}}),t(e)})),de="".concat("https://fartist.herokuapp.com","/graphql"),je=le()({uri:de}),be=new s.ApolloClient({link:Object(s.concat)(ue,je),cache:new s.InMemoryCache,connectToDevTools:!0,headers:{authorization:"dandandooooooooo"}});o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(s.ApolloProvider,{client:be,children:Object(r.jsx)(oe,{})})}),document.getElementById("root"))}},[[494,1,2]]]);
//# sourceMappingURL=main.266e83de.chunk.js.map